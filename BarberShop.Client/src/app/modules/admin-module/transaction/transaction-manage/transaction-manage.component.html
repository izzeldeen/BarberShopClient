

<div class="card">

    <div class="card-header pb-0">
        <h1 *ngIf="!entityDetails?.id" class="card-title mt-1 mb-0 " >
            {{'Create Transaction' | translate}}
        </h1>
        <h1 *ngIf="entityDetails?.id" class="card-title mt-1 mb-0 " >
            {{'Update Transaction' | translate}}
        </h1>
    </div>
    <div class="card-body">
        <form #manageEntityForm="ngForm" (ngSubmit)="saveForm()" class="py-5 px-3">

            <div class="row">

                <div  class="col-md-4">
                    <label class="form-label fw-bold text-muted"> 
                        {{'Transaction flow' | translate}} <span class="text-danger">*</span>
                    </label>
                    <ng-select 
                    (change)="onSelectTransactionFlow()"
                    [(ngModel)]="entityDetails.transactionType" [items]="dllTransactionTypes"
                     bindLabel="viewValue" bindValue="value" name="transactionType" required
                     #transactionType='ngModel'
                     placeholder="{{'Select' | translate }}"
                     
                     >
              <ng-template let-item="item" ng-label-tmp>
                  {{item.viewValue}}
              </ng-template>
              <ng-template let-item="item" ng-option-tmp>
                  {{item.viewValue }}
              </ng-template>
          </ng-select>
                </div>

                <div  class="col-md-4">
                    <label class="form-label fw-bold text-muted"> 
                        {{'Transaction Category' | translate}}  <span class="text-danger">*</span>
                    </label>
                    <ng-select 
                    [(ngModel)]="entityDetails.transactionSubType" [items]="dllTransactionSubSelectTypes"
                     bindLabel="viewValue" bindValue="value" name="transactionSubType" required
                     #transactionSubType='ngModel' required
                     placeholder="{{'Select' | translate }}"
                     
                     >
              <ng-template let-item="item" ng-label-tmp>
                  {{item.viewValue}}
              </ng-template>
              <ng-template let-item="item" ng-option-tmp>
                  {{item.viewValue }}
              </ng-template>
          </ng-select>
                </div>



                <div  class="col-md-4">
                    <label class="form-label fw-bold text-muted"> 
                        {{'Employee' | translate}} 
                    </label>
                    <ng-select 
                    [(ngModel)]="entityDetails.employeeId" [items]="dllEmployees"
                     bindLabel="viewValue" bindValue="value" name="employeeId" 
                     #employeeId='ngModel'
                     placeholder="{{'Select' | translate }}"
                     
                     >
              <ng-template let-item="item" ng-label-tmp>
                  {{item.viewValue}}
              </ng-template>
              <ng-template let-item="item" ng-option-tmp>
                  {{item.viewValue }}
              </ng-template>
          </ng-select>
                </div>
                <div class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="netAmount">
                        {{'Amount' | translate}}<span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="netAmount" name="netAmount" type="number" #netAmount="ngModel"
                           [minLength]="1"
                           autocomplete="new-title"
                           required
                           [(ngModel)]="entityDetails.netAmount">


                    <app-validator [control]="netAmount"></app-validator>
                </div>
             
                <div class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="transactionDate">
                        {{'Date' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="transactionDate" 
                           name="transactionDate" 
                           type="date"
                           #transactionDate="ngModel"
                           required
                           [(ngModel)]="entityDetails.transactionDate">
                    <app-validator [control]="transactionDate"></app-validator>
                </div>
                <div *ngIf="entityDetails.image" class="col-md-1 pt-3 text-right" >
                    <img src="{{fileUrl}}{{entityDetails.image}}" (click)="openImage(entityDetails.image)"  width="50px;"  height="50px;">
                   </div>
                    <div [class]="entityDetails.image ? 'col-md-3' : 'col-md-4'" >
                        <label class="form-label fw-bold text-muted" for="sauidfile" >
                            {{'Image' | translate}} <span class="text-danger">*</span>
                        </label>
                            
                        <input id="sauidfile" type="file" class="form-control mt-2" aria-label="file example" required
                        (change)="onFileChange($event)" accept=".pdf, .doc, .docx, .JPG, .JPEG, .GIF, .PNG" multiple
                        #fileInput>
                         
                    </div>

                <div class="col-12">
                    <label class="form-label fw-bold text-muted" for="description">
                        {{'Description' | translate}} <span class="text-danger">*</span>
                    </label>

                    <textarea class="form-control"
                           id="description" name="description"  #description="ngModel"
                           [minLength]="1"
                           autocomplete="new-title"
                           required
                           [(ngModel)]="entityDetails.description"></textarea>


                    <app-validator [control]="description"></app-validator>
                </div>
               

               
        </div>
        

            <div class="d-flex flex-wrap gap-2 text-end mt-2 align-items-center justify-content-center">
                <button  (click)="backToList()"
                class="btn btn-dark px-5 waves-effect btn-rounded waves-light"
                type="button">{{'Discard' | translate}}</button>
        
                <button 
                        class="btn px-5 btn-primary waves-effect btn-rounded waves-light"
                        type="submit">
                    {{'Save' | translate}}
                </button>
            </div>

          
        </form>
    </div>
</div>
