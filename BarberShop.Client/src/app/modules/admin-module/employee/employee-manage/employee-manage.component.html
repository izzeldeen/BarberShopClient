

<div class="card">

    <div class="card-header pb-0">
        <h1 *ngIf="!entityDetails?.id" class="card-title mt-1 mb-0 " >
            {{'Add Employee' | translate}}
        </h1>
        <h1 *ngIf="entityDetails?.id" class="card-title mt-1 mb-0 " >
            {{'Update Employee' | translate}}
        </h1>
    </div>
    <div class="card-body">
        <form #manageEntityForm="ngForm" (ngSubmit)="saveForm()" class="py-5 px-3">

            <div class="row">
                <div class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="phoneNumber">
                        {{'Phone number' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="phoneNumber" name="phoneNumber" type="text" #phoneNumber="ngModel"
                           [minLength]="1"
                           autocomplete="new-title"
                           required
                           [(ngModel)]="entityDetails.phoneNumber">


                    <app-validator [control]="phoneNumber"></app-validator>
                </div>
                <div class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="email">
                        {{'Email' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="email" name="email" type="text" #email="ngModel"
                           [minLength]="1"
                           autocomplete="new-title"
                           required
                           [(ngModel)]="entityDetails.email">


                    <app-validator [control]="phoneNumber"></app-validator>
                </div>
                <div class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="firstName">
                        {{'First Name' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="firstName" name="firstName" type="text" #firstName="ngModel"
                           [minLength]="1"
                           autocomplete="new-title"
                           required
                           [(ngModel)]="entityDetails.firstName">


                    <app-validator [control]="firstName"></app-validator>
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="lastName">
                        {{'Last Name' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="lastName" name="lastName" type="text" #lastName="ngModel"
                           [minLength]="1"
                           autocomplete="new-title"
                           required
                           [(ngModel)]="entityDetails.lastName">


                    <app-validator [control]="lastName"></app-validator>
                </div>
             
                <div class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="position">
                        {{'Position' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="position" name="position" type="text" #position="ngModel"
                           [minLength]="1"
                           autocomplete="new-title"
                           required
                           [(ngModel)]="entityDetails.position">


                    <app-validator [control]="position"></app-validator>
                </div>

                <div class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="employmentStartDate">
                        {{'Start Date' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="employmentStartDate" 
                           name="employmentStartDate" 
                           type="date"
                           #employmentStartDate="ngModel"
                           required
                           [(ngModel)]="entityDetails.employmentStartDate">
                    <app-validator [control]="employmentStartDate"></app-validator>
                </div>

                
                <div class="col-md-4">
                    <label class="form-label fw-bold text-muted"> 
                        {{'Salary Types' | translate}} 
                    </label>
                    <ng-select 
                    [(ngModel)]="entityDetails.salaryCalculationType" [items]="dllSalaryType"
                     bindLabel="viewValue" bindValue="value" name="employee" required
                     #employee='ngModel'
                     placeholder="{{'Select' | translate }}"
                     
                     >
              <ng-template let-item="item" ng-label-tmp>
                  {{item.viewValue}}
              </ng-template>
              <ng-template let-item="item" ng-option-tmp>
                  {{item.viewValue }}
              </ng-template>
          </ng-select>
                </div>

                <div *ngIf="entityDetails.salaryCalculationType != 2" class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="fixedValue">
                        {{'Fixed' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="fixedValue" 
                           name="fixedValue" 
                           type="text"
                           #fixedValue="ngModel"
                           required
                           [(ngModel)]="entityDetails.fixedValue"
                           decimal-validator >
                    <app-validator [control]="fixedValue"></app-validator>
                </div>

                <div *ngIf="entityDetails.salaryCalculationType != 1" class="col-md-4">
                    <label class="form-label fw-bold text-muted" for="percentageValue">
                        {{'Percentage' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input class="form-control"
                           id="percentageValue" 
                           name="percentageValue" 
                           type="text"
                           #percentageValue="ngModel"
                           required
                           [(ngModel)]="entityDetails.percentageValue"
                           decimal-validator >
                    <app-validator [control]="percentageValue"></app-validator>
                </div>

                <div class="col-md-4" >
                    <label class="form-label fw-bold text-muted" for="sauidfile" >
                        {{'Profile Image' | translate}} <span class="text-danger">*</span>
                    </label>

                    <input id="sauidfile" type="file" class="form-control mt-2" aria-label="file example" required
                    (change)="onFileChange($event)" accept=".pdf, .doc, .docx, .JPG, .JPEG, .GIF, .PNG" multiple
                    #fileInput>
                    <!-- <img *ngIf="entityDetails.saudiId" class="details-image" src="{{'data:image/jpeg;base64,' + entityDetails.saudiId}}" > -->
                </div>


        </div>
        

            <div class="d-flex flex-wrap gap-2 text-end mt-2 align-items-end justify-content-end">
                <button  (click)="backToList()"
                class="btn btn-outline-secondary waves-effect btn-rounded waves-light"
                type="button">{{'Discard' | translate}}</button>
        
                <button 
                        class="btn btn-primary waves-effect btn-rounded waves-light"
                        type="submit">
                    {{'Save' | translate}}
                </button>
            </div>

          
        </form>
    </div>
</div>
